Java类加载器的作用是在程序运行时加载类。Java中的类加载器有三个机制：委托机制、可见性机制和单一性机制。委托机制指的是将加载一个类的请求转到它的父类加载器，如果父类加载器无法找到类或者找到了但是无法加载类，那么就由该类自己加载类。可见性机制指的是子类的加载器可以看见所有的父类加载器加载的类，而父类加载器看不到子类加载器加载的类。单一性机制指的是每个类只会被加载一次，这是由委托机制实现的，确保子类加载器不会加载父类加载器加载过的类。正确理解类加载器能够帮你解决NoClassDefFoundError和java.lang.ClassNotFoundException，因为它们和类的加载相关。类加载器通常也是比较高级的Java面试中的重要考题，Java类加载器和工作原理以及classpath如何运作的经常被问到。Java面试题中也经常出现“一个类是否能被两个不同类加载器加载”这样的问题。这篇教程中，我们将学到类加载器是什么，它的工作原理以及一些关于类加载器的知识点。  

### 类加载器是什么  
在Java中，类加载器是一个用来加载类文件的类。Java源代码通过javac编译器编译成类文件。然后JVM通过执行类文件中的字节码来执行程序。类加载器负责加载文件系统、网络或其他来源的类文件。有三种默认使用的类加载器：Bootstrap类加载器、Extension类加载器和System类加载器（或者叫作Application类加载器）。每种类加载器都预先设定好位置从哪里加载类。Bootstrap类加载器负责加载来自于rt.jar文件中标准的JDK类文件，并且它是所有类加载器的父加载器。Bootstrap类加载器没有任何父类加载器，如果你调用String.class.getClassLoader()，会返回null，任何基于此的代码会抛出NUllPointerException异常。在Java中，Bootstrap加载器也被称为初始类加载器。  

Extension加载器将加载类的请求先委托给它的父加载器，也就是Bootstrap，如果没有成功加载的话，再从jre/lib/ext目录下或者由java.ext.dirs系统属性指定的目录下加载类。Extension加载器由sun.misc.Launcher$ExtClassLoader实现。  

JVM使用的第三种默认的类加载器叫做System类加载器或者Application类加载器。它负责从classpath环境变量中加载某些应用相关的类，classpath环境变量通常由-classpath或-cp命令行选项来定义，或者是JAR中的Manifest的classpath属性。Application类加载器是Extension类加载器的子加载器。由sun.misc.Launcher$AppClassLoader类实现。除了Bootstrap类加载器大部分是由C语言来实现的，其他的类加载器都是通过java.lang.ClassLoader来实现的。  

简而言之，下面是Bootstrap、Extension和Application类加载器加载类文件的位置：  
1. Bootstrap类加载器——JRE/lib/rt.jar
2. Extension类加载器——JRE/lib/ext或者java.ext.dirs指向的目录
3. Application类加载器——CLASSPATH环境变量，由-classpath或-cp选项定义，或者是JAR中的Manifest的classpath属性定义  
![image](/Java/Images/java-classloader-extends.png)  
